# Spring Redis Session

## 原理

Spring Redis Session的工作原理就是，通过使用一个最高优先级的Filter，先对请求进行拦截，然后对请求和响应对象进行包装，从而使它们使用Redis记录Session。

```java
@Configuration
@EnableWebMvc
@EnableRedisHttpSession
@ComponentScan("com.hdr.spring.session")
public class AppConfig  implements WebMvcConfigurer {
  // 用于提供Redis连接
  @Bean
  public LettuceConnectionFactory connectionFactory() {
     RedisStandaloneConfiguration conf = new RedisStandaloneConfiguration("127.0.0.1", 6379);
     conf.setPassword("!@#$");
     return new LettuceConnectionFactory(conf);
  }

  // redis序列化器
  // ???
  @Bean
  public RedisSerializer<Object> springSessionDefaultRedisSerializer(){
     return new GenericJackson2JsonRedisSerializer(om());
  }

}
```

```java
public class SpringSessionInitializer extends AbstractHttpSessionApplicationInitializer {
   public SpringSessionInitializer() {
     // 有两个构造方法，一个无参，一个Class<?>... configurationClasses 
     // 这其中涉及到ContextLoaderListener的问题
      super();
   }
}
```