# 常用注解

## @Required

用于Bean属性的setter方法上,规定在配置的时候,必需配置这个属性。

## @Autowired

@Autowired 自动装箱,其实就是实现依赖注入.

在启动spring IoC时，容器自动装载了一个AutowiredAnnotationBeanPostProcessor后置处理器，当容器扫描到@Autowied、@Resource或@Inject时，就会在IoC容器自动查找需要的bean，并装配给该对象的属性.

**注意事项:**

- 在使用@Autowired时，首先在容器中查询对应类型的Bean.
- 如果查询结果刚好为一个，就将该bean装配给@Autowired指定的数据 .
- 如果查询的结果不止一个，那么@Autowired会根据名称来查找.
- 如果查询的结果不止一个，又想使用特定的Bean,则使用@Qualifier("BeanId").
- 如果查询的结果为空，那么会抛出异常,解决方法时，使用required=false.

**使用方法**

- 修饰构造器

  ```java
  public class MovieRecommender {
  
      private final CustomerPreferenceDao customerPreferenceDao;
  
      @Autowired
      public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {
          this.customerPreferenceDao = customerPreferenceDao;
      }
      // 在Spring Framework4.3以后,如果只有一个构造器,那就无需使用@Autowired注解.
  }
  ```

- 修饰setter方法

  ```java
  public class SimpleMovieLister {
  
      private MovieFinder movieFinder;
  
      @Autowired
      public void setMovieFinder(MovieFinder movieFinder) {
          this.movieFinder = movieFinder;
      }
  
      // ...
  }
  ```

- 修饰方法

  ```java
  public class MovieRecommender {
  
      private MovieCatalog movieCatalog;
  
      private CustomerPreferenceDao customerPreferenceDao;
  
      @Autowired
      public void prepare(MovieCatalog movieCatalog,
              CustomerPreferenceDao customerPreferenceDao) {
          this.movieCatalog = movieCatalog;
          this.customerPreferenceDao = customerPreferenceDao;
      }
  
      // ...
  }
  ```

- 修饰字段

  ```java
  public class MovieRecommender {
  
      private final CustomerPreferenceDao customerPreferenceDao;
  
      @Autowired
      private MovieCatalog movieCatalog;
  
      @Autowired
      public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {
          this.customerPreferenceDao = customerPreferenceDao;
      }
  
      // ...
  }
  ```

- 从容器中获取指定类型的所有Bean

  ```java
  public class MovieRecommender {
  
      @Autowired
      private MovieCatalog[] movieCatalogs;
  
      // 数组
  }
  ```

  ```java
  public class MovieRecommender {
  
      private Set<MovieCatalog> movieCatalogs;
  
      @Autowired
      public void setMovieCatalogs(Set<MovieCatalog> movieCatalogs) {
          this.movieCatalogs = movieCatalogs;
      }
  
      // set
  }
  ```

  ```java
  public class MovieRecommender {
  
      private Map<String, MovieCatalog> movieCatalogs;
  
      @Autowired
      public void setMovieCatalogs(Map<String, MovieCatalog> movieCatalogs) {
          this.movieCatalogs = movieCatalogs;
      }
  
      // Map
  }
  ```

### @Primary

正如我们前面所说,@Autowired是根据类型匹配的,如果有多个相同类型的Bean,这时候我们就要对选择哪个Bean做出配置了.

```java
@Configuration
public class MovieConfiguration {

    @Bean
    @Primary
    public MovieCatalog firstMovieCatalog() { ... }

    @Bean
    public MovieCatalog secondMovieCatalog() { ... }

    // ...
}
```

### @Qualifier

@Qualifier注解的目的跟@Primary的目的相同,只不过是使用方式不同.

```java
public class MovieRecommender {

    @Autowired
    @Qualifier("main") // 匹配类型是MovieCatalog  名字是 main 的Bean
    private MovieCatalog movieCatalog;

    // ...
}
```

## @Resource

@Resource并不是Spring框架定义的注解,但是它跟@Autowired有相同的目的,所以在这里一起讲.

@Resource注解与@Autowired注解作用非常相似,区别在于

- @Autowired默认按照类型进行bean匹配，@Resource默认按照名称进行bean匹配 
- @Autowired是Spring的注解，@Resource是J2EE的注解

**注意事项**

- @Resource后面没有任何内容，默认通过名称去匹配bean，找不到再按类型去匹配 
- 指定了名称或者类型则根据相应的方式去匹配bean 
- 指定了name和type则根据指定的name和type去匹配bean，任何一个不匹配都将报错 

## @Value

Annotation at the field or method/constructor parameter level that indicates a default value expression for the affected argument.

Typically used for expression-driven dependency injection. Also supported for dynamic resolution of handler method parameters, e.g. in Spring MVC.

A common use case is to assign default field values using `#{systemProperties.myProp}` style expressions.

## @ImportResource

导入XML配置

```java
@ImportResource("classpath:/com/acme/properties-config.xml")
```

## @PropertySource

导入properties文件



## 总结:

- @PropertySource导入properties文件
- @ImportResource导入XML配置
- @Configuration把一个类作为一个IoC容器，它的某个方法头上如果注册了
- @Bean，就会作为这个Spring容器中的Bean。 @Scope注解 作用域 
- @Lazy(true) 表示延迟初始化 
- @Service用于标注业务层组件、  
- @Controller用于标注控制层组件（如struts中的action） 
- @Repository用于标注数据访问组件，即DAO组件。 
- @Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。 
- @Scope用于指定scope作用域的（用在类上） 
- @PostConstruct用于指定初始化方法（用在方法上）
- @PreDestory用于指定销毁方法（用在方法上） 
- @DependsOn：定义Bean初始化及销毁时的顺序 
- @Primary：自动装配时当出现多个Bean候选者时，被注解为@Primary的Bean将作为首选者，否则将抛出异常 @Autowired 默认按类型装配，
- @Resource默认按名称装配，当找不到与名称匹配的bean才会按类型装配。 
- @PostConstruct 初始化注解 
- @PreDestroy 摧毁注解 默认 单例  启动就加载 
- @Async异步方法调用 