# Spring IoC容器与Bean

## 1.IoC容器

IcC，Inversion of control，意思是控制反转。在实际开发中，常常会有一个对象的功能的实现需要依赖另一个对象的情况，也就是说一个对象为了完成工作，必须获得另一个对象。如果对象获取其依赖对象的过程由它自身来完成，这个做法会导致代码冗余以及代码难以调试。而控制反转设计原则，则是把对象获取其依赖对象的过程，交由容器来完成。容器为对象注入它所依赖的对象。由于获取依赖对象的方式被反转了，因此得名控制反转。

简单来说，就是对依赖对象的创建和使用进行解耦。

## 2.Bean

在软件开发中，习惯把可重用的组件叫做Bean。例如JavaBean其实就是可重用的组件，然后它还带有Java的色彩，所以就叫JavaBean。在Spring中，由IoC容器管理的组件就叫做Bean。

## 3.容器的创建和使用

`org.springframework.context.ApplicationContext`代表Spring IoC容器,它负责Bean的实例化、配置以及组装.

容器读取配置元数据了解需要创建哪些对象,以及如何配置和管理这些对象.配置元数据可以是XML文件也可以是Java代码.

spring提供了一些`ApplicationContext`接口的实现类.分别是

- `ClassPathXmlApplicationContext` 容器从XML文件中读取配置信息
- `FileSystemXmlApplicationContext` 容器从XML文件中读取配置信息
- `AnnotationConfigApplicationContext` 容器从Java文件中读取配置信息

### 3.1创建容器

创建Java配置

```java
@Configuration
public class AppConfig {
	// bean definition
}
```

创建容器

```java
ApplicationContext context = 
    new AnnotationConfigApplicationContext(AppConfig.class);

AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();
ctx.register(AppConfig.class, OtherConfig.class);
ctx.refresh();
```

### 3.2使用容器

容器提供了一个getBean方法，让我们可以从容器中获取Bean

```java
PetStoreService service = context.getBean("petStore", PetStoreService.class);
```

