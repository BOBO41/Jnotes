# 线程通信

`java.lang.Object`类提供了两个用于线程通信的方法

- `wait()`：执行该方法的线程会释放对象的锁，并进入对象的等待池中，等待其它线程将他唤醒。
- `notify()`：执行该方法的线程唤醒在对象的等待池中等待的一个线程。Java虚拟机从对象的等待池随机选择一个线程，把它转到对象的锁池中。

假定线程`T1`和线程`T2`共同操作一个对象`obj`，这两个线程可以通过对象`obj`的`wait()`和`notify()`方法来进行通信。

1. 线程`T1`执行对象`obj`的同步代码块时，`T1`持有对象`obj`的锁，`T2`在对象`obj`的锁池中等待。
2. 线程`T1`在同步代码块中执行`obj.wait()`方法，线程`T1`释放`obj`的锁，进入`obj`的等待池。
3. 线程`T2`获得`obj`的锁，执行`obj`的另一个同步代码块。
4. 线程`T2`在同步代码中执行`obj.notify()`方法，Java虚拟机把`T1`从等待池放入锁池。
5. 线程`T2`执行完同步代码块后，释放锁。

# ThreadLocal类

`java.lang.ThreadLocal`类可用来存放线程的局部变量，每个线程都有单独的局部变量，彼此之间不会共享。

`ThreadLocal<T>`类主要包括以下三个方法：

- `public T get()`：返回当前线程的局部变量
- `protected T initialValue()`：返回当前线程的局部变量的初始值
- `public void set(T value)`：设置当前线程的局部变量

