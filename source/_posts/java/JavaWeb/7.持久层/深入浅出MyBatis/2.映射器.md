# 映射器

## 映射器的主要元素

- select
- insert
- update
- delete
- sql  （允许自定义一部分的SQL然后在各个地方引用）
- resultMap
- cache
- cache-ref

## Select元素

### Select元素的属性

| 属性          | 说明                                            | 备注       |
| ------------- | ----------------------------------------------- | ---------- |
| id            | 对应的方法名称                                  |            |
| parameterType | 参数类型，可以使类的全命令，也可以使用别名      |            |
| resultType    | 结果类型                                        |            |
| resultMap     | 结果映射                                        |            |
| flushCache    | 调用SQL后，是否清空之前查询的本地缓存和二级缓存 | 默认 false |
| useCache      | 是否启动二级缓存，存储该结果                    | 默认 true  |
| timeout       |                                                 |            |
| fetchSize     | 设定获取记录的总条数                            |            |
| statementType |                                                 |            |
| resultSetType |                                                 |            |
| databaseId    |                                                 |            |
| resultOrdered |                                                 |            |
| resultSets    |                                                 |            |

### 传递多个参数

#### 使用Map传递参数

可读性差

#### 使用注解的方式传递参数

```java
List<Role> findRoleByAnnotation(@Param("roleName")String roleName,
                                @Param("note")String note);
```

当参数个数一多，写起来也是难受

#### 使用JavaBean传递参数

## insert元素

### insert元素的属性

| 属性名称         | 描述 | 备注 |
| ---------------- | ---- | ---- |
| id               |      |      |
| parameterType    |      |      |
| flushCache       |      |      |
| timeout          |      |      |
| statementType    |      |      |
| useGeneratedKeys |      |      |
| keyProperty      |      |      |
| keyColumn        |      |      |
| databaseI        |      |      |
| lang             |      |      |

## sql元素

通过sql元素，我们可以写sql语句，然后在其他地方使用。

```xml
<sql id="role_columns">
	id,role_name,note
</sql>

<select id="getRole" parameterType="long" resultMap="roleMap">
	select <include refid="role_columns"> from t_role where id = #{id};
</select>
```



