# 泛型的引入

**以Java集合框架为例，介绍泛型的作用与使用方法**

在JDK5之前，集合中的元素都是`Object`类型，从集合中获取对象以后常常需要进行强制类型转化。

下面代码向`ArrayList`中加入一个`String`，接下去取出这个`String`对象，然后再把它强制转换成`Integer`对象。

```java
List arrayList = new ArrayList();
arrayList.add("hello");
Integer num = (Integer) arrayList.get(0);
```

上面的代码编译时不会报错，会在运行时报错。为了尽可能早的发现这种错误，JDK5中引入了泛型机制。

就是在生命集合变量和创建集合对象时，可以用`<>`指定集合中元素的类型：

```java
List<String> list = new ArrayList<String>(); // 这是JDK5的写法
List<String> list = new ArrayList<>(); //  具体我忘了，反正JDK8的话已经有类型推断了
```

这时候如果你往`list`添加其它类型数据，编译就会报错，从而避免了运行时类型转化错误。

# 定义泛型类和泛型接口

泛型的本质其实就是把类参数化，由于事先并不知道运行时会接受一个什么样的类，因此用一个参数来代表类，等运行时再用传递过来的实际类赋给参数，本质就跟方法参数的作用一样。

**定义泛型类**

```java
/**
* 类名后面使用<T>  T只是一个参数名，具体用什么随你喜欢
* 在运行时T的值就会变成传递过来的类
*/
public class Bag<T> {
   private T content;

   public Bag(T content){
      this.content = content;
   }

   public T getContent() {
      return content;
   }

   public void setContent(T content) {
      this.content = content;
   }
}
```

**定义泛型接口**

```java
/**
* 定义泛型接口也一样
*/
public interface Bag<T>{
    // 不多讲了
}
```

# 定义泛型方法

注意：泛型方法不一定定义在泛型类中。

```java
public class ArrayAlg {
	public static <T> T getMiddle(T... a) {
		return a[a.length / 2];
	}
}
// 调用泛型方法
String middle = ArrayAlg.<String>getMiddle("J", "k", "L");
// 不过其实也没必要写<String>，因为编译器能推断出它的类型
String middle = ArrayAlg.getMiddle("J", "k", "L");
```

# extends和Super关键字

在定义泛型类时，可以用`extends`和`Super`关键字来限定类型参数

```java
public class Bag<T extends Food> {
	// 指名T必须是Food或Food的子类
}
```

```java
public class Bag<T super Food> {
	// 指名T必须是Apple或Apple的父类
}
```

# 使用？通配符

`?`和`T`区别：`？`是一个不确定类，`？`和`T`都表示不确定的类型 ，但如果是`T`的话，函数里面可以对`T`进行操作，比方 `T car = getCar()`，而不能用`？ car = getCar()`。

```java
public class TestDifferenceBetweenObjectAndT {

   public static void printObjectList(List<Object> list) {
      for (Object elem : list) {
         System.out.println(elem + " ");
      }
      System.out.println();
   }

   public static <T> void printTList(List<T> list) {
      for (T elem : list) {
         System.out.println(elem + " ");
      }
      System.out.println();
   }

   public static void printWildCastList(List<?> list) {
      for (int i = 0; i < list.size(); i++) {
         System.out.println(list.get(i) + " ");
      }
      System.out.println();
   }

   public static void main(String[] args) {
      List<Integer> integerList = Arrays.asList(1, 2, 3);
      List<String> stringList = Arrays.asList("one", "two", "three");
      List<Object> objectList = Arrays.asList(1, "two", 1.23);
      List<Fruit> fruitList = Arrays.asList(new Apple(), new Banana());
      /*
       * 下面这句会编译报错，因为参数不能转化成功
       * */
      printObjectList(fruitList);

      printObjectList(objectList);
      printTList(integerList);
      printTList(stringList);
      printTList(objectList);
      printWildCastList(integerList);
      printWildCastList(stringList);
      printWildCastList(objectList);
   }
   
}
```

- 

